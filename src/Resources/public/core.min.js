var AjaxRequest={themePath:Contao.script_url+"system/themes/"+Contao.theme+"/",toggleNavigation:function(e,t,n){e.blur();var a=$(t),o=$(e).getParent("li");return a?(o.hasClass("node-collapsed")?(a.setStyle("display",null),o.removeClass("node-collapsed").addClass("node-expanded"),$(e).store("tip:title",Contao.lang.collapse),new Request.Contao({url:n}).post({action:"toggleNavigation",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(a.setStyle("display","none"),o.removeClass("node-expanded").addClass("node-collapsed"),$(e).store("tip:title",Contao.lang.expand),new Request.Contao({url:n}).post({action:"toggleNavigation",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!1):(new Request.Contao({url:n,evalScripts:!0,onRequest:AjaxRequest.displayBox(Contao.lang.loading+" …"),onSuccess:function(e){var n=new Element("li",{id:t,"class":"tl_parent",html:e}).inject(o,"after");n.getElements("a").each(function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)}),o.removeClass("node-collapsed").addClass("node-expanded"),AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:"loadNavigation",id:t,state:1,REQUEST_TOKEN:Contao.request_token}),!1)},toggleStructure:function(e,t,n,a){e.blur();var o=$(t),i=$(e).getFirst("img");return o?("none"==o.getStyle("display")?(o.setStyle("display",null),i.src=AjaxRequest.themePath+"icons/folMinus.svg",$(e).store("tip:title",Contao.lang.collapse),new Request.Contao({field:e}).post({action:"toggleStructure",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(o.setStyle("display","none"),i.src=AjaxRequest.themePath+"icons/folPlus.svg",$(e).store("tip:title",Contao.lang.expand),new Request.Contao({field:e}).post({action:"toggleStructure",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!1):(new Request.Contao({field:e,evalScripts:!0,onRequest:AjaxRequest.displayBox(Contao.lang.loading+" …"),onSuccess:function(o){var l=new Element("li",{id:t,"class":"parent",styles:{display:"inline"}});if(new Element("ul",{"class":"level_"+n,html:o}).inject(l,"bottom"),5==a)l.inject($(e).getParent("li"),"after");else{for(var s,c=!1,r=$(e).getParent("li");"element"==typeOf(r)&&(s=r.getNext("li"));)if(r=s,r.hasClass("tl_folder")){c=!0;break}c?l.inject(r,"before"):l.inject(r,"after")}l.getElements("a").each(function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)}),$(e).store("tip:title",Contao.lang.collapse),i.src=AjaxRequest.themePath+"icons/folMinus.svg",window.fireEvent("structure"),AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:"loadStructure",id:t,level:n,state:1,REQUEST_TOKEN:Contao.request_token}),!1)},toggleFileManager:function(e,t,n,a){e.blur();var o=$(t),i=$(e).getFirst("img");return o?("none"==o.getStyle("display")?(o.setStyle("display",null),i.src=AjaxRequest.themePath+"icons/folMinus.svg",$(e).store("tip:title",Contao.lang.collapse),new Request.Contao({field:e}).post({action:"toggleFileManager",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(o.setStyle("display","none"),i.src=AjaxRequest.themePath+"icons/folPlus.svg",$(e).store("tip:title",Contao.lang.expand),new Request.Contao({field:e}).post({action:"toggleFileManager",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!1):(new Request.Contao({field:e,evalScripts:!0,onRequest:AjaxRequest.displayBox(Contao.lang.loading+" …"),onSuccess:function(n){var o=new Element("li",{id:t,"class":"parent",styles:{display:"inline"}});new Element("ul",{"class":"level_"+a,html:n}).inject(o,"bottom"),o.inject($(e).getParent("li"),"after"),o.getElements("a").each(function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)}),$(e).store("tip:title",Contao.lang.collapse),i.src=AjaxRequest.themePath+"icons/folMinus.svg",AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:"loadFileManager",id:t,level:a,folder:n,state:1,REQUEST_TOKEN:Contao.request_token}),!1)},togglePagetree:function(e,t,n,a,o){e.blur(),Backend.getScrollOffset();var i=$(t),l=$(e).getFirst("img");return i?("none"==i.getStyle("display")?(i.setStyle("display",null),l.src=AjaxRequest.themePath+"icons/folMinus.svg",$(e).store("tip:title",Contao.lang.collapse),new Request.Contao({field:e}).post({action:"togglePagetree",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(i.setStyle("display","none"),l.src=AjaxRequest.themePath+"icons/folPlus.svg",$(e).store("tip:title",Contao.lang.expand),new Request.Contao({field:e}).post({action:"togglePagetree",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!1):(new Request.Contao({field:e,evalScripts:!0,onRequest:AjaxRequest.displayBox(Contao.lang.loading+" …"),onSuccess:function(n){var a=new Element("li",{id:t,"class":"parent",styles:{display:"inline"}});new Element("ul",{"class":"level_"+o,html:n}).inject(a,"bottom"),a.inject($(e).getParent("li"),"after"),a.getElements("a").each(function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)}),$(e).store("tip:title",Contao.lang.collapse),l.src=AjaxRequest.themePath+"icons/folMinus.svg",AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:"loadPagetree",id:t,level:o,field:n,name:a,state:1,REQUEST_TOKEN:Contao.request_token}),!1)},toggleFiletree:function(e,t,n,a,o,i){e.blur(),Backend.getScrollOffset();var l=$(t),s=$(e).getFirst("img");return l?("none"==l.getStyle("display")?(l.setStyle("display",null),s.src=AjaxRequest.themePath+"icons/folMinus.svg",$(e).store("tip:title",Contao.lang.collapse),new Request.Contao({field:e}).post({action:"toggleFiletree",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(l.setStyle("display","none"),s.src=AjaxRequest.themePath+"icons/folPlus.svg",$(e).store("tip:title",Contao.lang.expand),new Request.Contao({field:e}).post({action:"toggleFiletree",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!1):(new Request.Contao({field:e,evalScripts:!0,onRequest:AjaxRequest.displayBox(Contao.lang.loading+" …"),onSuccess:function(n){var a=new Element("li",{id:t,"class":"parent",styles:{display:"inline"}});new Element("ul",{"class":"level_"+i,html:n}).inject(a,"bottom"),a.inject($(e).getParent("li"),"after"),a.getElements("a").each(function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)}),$(e).store("tip:title",Contao.lang.collapse),s.src=AjaxRequest.themePath+"icons/folMinus.svg",AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:"loadFiletree",id:t,folder:n,level:i,field:a,name:o,state:1,REQUEST_TOKEN:Contao.request_token}),!1)},toggleSubpalette:function(e,t,n){e.blur();var a=$(t);return a?void(e.value?(e.value="",e.checked="",a.setStyle("display","none"),a.getElements("[required]").each(function(e){e.set("required",null).set("data-required","")}),new Request.Contao({field:e}).post({action:"toggleSubpalette",id:t,field:n,state:0,REQUEST_TOKEN:Contao.request_token})):(e.value=1,e.checked="checked",a.setStyle("display",null),a.getElements("[data-required]").each(function(e){e.set("required","").set("data-required",null)}),new Request.Contao({field:e}).post({action:"toggleSubpalette",id:t,field:n,state:1,REQUEST_TOKEN:Contao.request_token}))):void new Request.Contao({field:e,evalScripts:!1,onRequest:AjaxRequest.displayBox(Contao.lang.loading+" …"),onSuccess:function(n,a){var o=new Element("div",{id:t,html:n,styles:{display:"block"}}).inject($(e).getParent("div").getParent("div"),"after");a.javascript&&(document.write=function(e){var t="";e.replace(/<script src="([^"]+)"/i,function(e,n){t=n}),t&&Asset.javascript(t,{onLoad:function(){Browser.exec(a.javascript)}})},Browser.exec(a.javascript)),e.value=1,e.checked="checked",o.getElements("a").each(function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)}),AjaxRequest.hideBox(),window.fireEvent("subpalette"),window.fireEvent("ajax_change")}}).post({action:"toggleSubpalette",id:t,field:n,load:1,state:1,REQUEST_TOKEN:Contao.request_token})},toggleVisibility:function(e,t,n){e.blur();var a,o,i,l,s,c=null,r=$(e).getFirst("img"),d=1==r.get("data-state"),u=e.getParent("div");return null===r.get("data-state")&&(d=-1==r.src.indexOf("invisible"),console.warn('Using a visibility toggle without a "data-state" attribute is deprecated. Please adjust your Contao DCA file.')),u.hasClass("tl_right")?c=u.getPrevious("div").getElement("img"):u.hasClass("tl_listing_container")?(c=e.getParent("td").getPrevious("td").getFirst("div.list_icon"),null===c&&(c=e.getParent("td").getPrevious("td").getElement("div.cte_type")),null===c&&(c=e.getParent("tr").getFirst("td").getElement("div.list_icon_new"))):(o=u.getNext("div"))&&(o.hasClass("cte_type")&&(c=o),null===c&&(c=o.getFirst("div.list_icon"))),null!==c&&("img"==c.nodeName.toLowerCase()?c.getParent("ul.tl_listing").hasClass("tl_tree_xtnd")?(i=c.get("data-icon"),l=c.get("data-icon-disabled"),null===i&&(i=c.src.replace(/(.*)\/([a-z0-9]+)_?\.(gif|png|jpe?g|svg)$/,"$1/$2.$3"),console.warn('Using a row icon without a "data-icon" attribute is deprecated. Please adjust your Contao DCA file.')),null===l&&(l=c.src.replace(/(.*)\/([a-z0-9]+)_?\.(gif|png|jpe?g|svg)$/,"$1/$2_.$3"),console.warn('Using a row icon without a "data-icon-disabled" attribute is deprecated. Please adjust your Contao DCA file.')),-1==i.indexOf("/")&&(i=AjaxRequest.themePath+(i.match(/\.svg$/)?"icons/":"images/")+i),-1==l.indexOf("/")&&(l=AjaxRequest.themePath+(l.match(/\.svg$/)?"icons/":"images/")+l),c.src=d?l:i):(s=c.getParent("a"),s&&-1==s.href.indexOf("do=feRedirect")&&(c=(o=s.getNext("a"))?o.getFirst("img"):new Element("img")),i=c.get("data-icon"),l=c.get("data-icon-disabled"),null===i&&(a=c.src.replace(/.*_([0-9])\.(gif|png|jpe?g|svg)/,"$1"),i=c.src.replace(/_[0-9]\.(gif|png|jpe?g|svg)/,(1==a.toInt()?"":"_"+(a.toInt()-1))+".$1").split(/[\\\/]/).pop(),console.warn('Using a row icon without a "data-icon" attribute is deprecated. Please adjust your Contao DCA file.')),null===l&&(a=c.src.replace(/.*_([0-9])\.(gif|png|jpe?g|svg)/,"$1"),l=c.src.replace(/(_[0-9])?\.(gif|png|jpe?g|svg)/,(a==c.src?"_1":"_"+(a.toInt()+1))+".$2").split(/[\\\/]/).pop(),console.warn('Using a row icon without a "data-icon-disabled" attribute is deprecated. Please adjust your Contao DCA file.')),-1==i.indexOf("/")&&(i=AjaxRequest.themePath+(i.match(/\.svg$/)?"icons/":"images/")+i),-1==l.indexOf("/")&&(l=AjaxRequest.themePath+(l.match(/\.svg$/)?"icons/":"images/")+l),c.src=d?l:i):c.hasClass("cte_type")?d?(c.addClass("unpublished"),c.removeClass("published")):(c.addClass("published"),c.removeClass("unpublished")):(i=c.get("data-icon"),l=c.get("data-icon-disabled"),null===i&&(i=c.getStyle("background-image").replace(/(.*)\/([a-z0-9]+)_?\.(gif|png|jpe?g|svg)\);?$/,"$1/$2.$2"),console.warn('Using a row icon without a "data-icon" attribute is deprecated. Please adjust your Contao DCA file.')),null===l&&(l=c.getStyle("background-image").replace(/(.*)\/([a-z0-9]+)_?\.(gif|png|jpe?g|svg)\);?$/,"$1/$2_.$3"),console.warn('Using a row icon without a "data-icon-disabled" attribute is deprecated. Please adjust your Contao DCA file.')),-1==i.indexOf("/")&&(i=AjaxRequest.themePath+(i.match(/\.svg$/)?"icons/":"images/")+i),-1==l.indexOf("/")&&(l=AjaxRequest.themePath+(l.match(/\.svg$/)?"icons/":"images/")+l),c.setStyle("background-image","url("+(d?l:i)+")"))),"tl_style"==n&&u.getParent("div").getElement("pre").toggleClass("disabled"),d?(r.src=AjaxRequest.themePath+"icons/invisible.svg",r.set("data-state",0),new Request.Contao({url:window.location.href,followRedirects:!1}).get({tid:t,state:0,rt:Contao.request_token})):(r.src=AjaxRequest.themePath+"icons/visible.svg",r.set("data-state",1),new Request.Contao({url:window.location.href,followRedirects:!1}).get({tid:t,state:1,rt:Contao.request_token})),!1},toggleFeatured:function(e,t){e.blur();var n=$(e).getFirst("img"),a=1==n.get("data-state");return null===n.get("data-state")&&(a=-1==n.src.indexOf("featured_"),console.warn('Using a featured toggle without a "data-state" attribute is deprecated. Please adjust your Contao DCA file.')),a?(n.src=AjaxRequest.themePath+"icons/featured_.svg",n.set("data-state",0),(new Request.Contao).post({action:"toggleFeatured",id:t,state:0,REQUEST_TOKEN:Contao.request_token})):(n.src=AjaxRequest.themePath+"icons/featured.svg",n.set("data-state",1),(new Request.Contao).post({action:"toggleFeatured",id:t,state:1,REQUEST_TOKEN:Contao.request_token})),!1},toggleFieldset:function(e,t,n){e.blur();var a=$("pal_"+t);if(a.hasClass("collapsed"))a.removeClass("collapsed"),(new Request.Contao).post({action:"toggleFieldset",id:t,table:n,state:1,REQUEST_TOKEN:Contao.request_token});else{for(var o=a.getParent("form"),i=a.getElements("[required]"),l=!0,s=0;s<i.length;s++)if(!i[s].get("value")){l=!1;break}l?(a.addClass("collapsed"),(new Request.Contao).post({action:"toggleFieldset",id:t,table:n,state:0,REQUEST_TOKEN:Contao.request_token})):"function"==typeof o.checkValidity&&o.getElement('button[type="submit"]').click()}return!1},toggleCheckboxGroup:function(e,t){e.blur();var n=$(t),a=$(e).getFirst("img");return n?("none"==n.getStyle("display")?(n.setStyle("display",null),a.src=AjaxRequest.themePath+"icons/folMinus.svg",(new Request.Contao).post({action:"toggleCheckboxGroup",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(n.setStyle("display","none"),a.src=AjaxRequest.themePath+"icons/folPlus.svg",(new Request.Contao).post({action:"toggleCheckboxGroup",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!0):!1},displayBox:function(e){var t=$("tl_ajaxBox"),n=$("tl_ajaxOverlay"),a=window.getScroll();null===n&&(n=new Element("div",{id:"tl_ajaxOverlay"}).inject($(document.body),"bottom")),n.set({styles:{display:"block",top:a.y+"px"}}),null===t&&(t=new Element("div",{id:"tl_ajaxBox"}).inject($(document.body),"bottom")),t.set({html:e,styles:{display:"block",top:a.y+100+"px"}})},hideBox:function(){var e=$("tl_ajaxBox"),t=$("tl_ajaxOverlay");t&&t.setStyle("display","none"),e&&e.setStyle("display","none")}},Backend={currentId:null,xMousePosition:0,yMousePosition:0,popupWindow:null,themePath:Contao.script_url+"system/themes/"+Contao.theme+"/",getMousePosition:function(e){Backend.xMousePosition=e.client.x,Backend.yMousePosition=e.client.y},openWindow:function(e,t,n){e.blur(),t=Browser.ie?t+40:t+17,n=Browser.ie?n+30:n+17,Backend.popupWindow=window.open(e.href,"","width="+t+",height="+n+",modal=yes,left=100,top=50,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no")},openModalWindow:function(e,t,n){new SimpleModal({width:e,hideFooter:!0,draggable:!1,overlayOpacity:.5,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}}).show({title:t,contents:n})},openModalImage:function(e){var t=e||{},n=new SimpleModal({width:t.width,hideFooter:!0,draggable:!1,overlayOpacity:.5,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}});n.show({title:t.title,contents:'<img src="'+t.url+'" alt="">'})},openModalIframe:function(e){var t=e||{},n=(window.getSize().y-186).toInt();(!t.height||t.height>n)&&(t.height=n);var a=new SimpleModal({width:t.width,hideFooter:!0,draggable:!1,overlayOpacity:.5,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}});a.show({title:t.title,contents:'<iframe src="'+t.url+'" width="100%" height="'+t.height+'" frameborder="0"></iframe>'})},openModalSelector:function(e){var t=e||{},n=(window.getSize().y-186).toInt();(!t.height||t.height>n)&&(t.height=n);var a=new SimpleModal({width:t.width,btn_ok:Contao.lang.close,draggable:!1,overlayOpacity:.5,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}});a.addButton(Contao.lang.close,"btn",function(){this.hide()}),a.addButton(Contao.lang.apply,"btn primary",function(){var e,n,a,o,i,l,s=window.frames["simple-modal-iframe"],c=[];if(void 0===s)return void alert("Could not find the SimpleModal frame");if(-1!=s.document.location.href.indexOf("/contao?"))return void alert(Contao.lang.picker);for(e=s.document.getElementById(t.id),n=e.getElementsByTagName("input"),l=0;l<n.length;l++)n[l].checked&&!n[l].id.match(/^check_all_/)&&(n[l].id.match(/^reset_/)||c.push(n[l].get("value")));t.tag&&(a=$(t.tag))?(a.value=c.join(","),(i=e.get("data-inserttag"))&&(a.value="{{"+i+"::"+a.value+"}}"),t.self.set("href",t.self.get("href").replace(/&value=[^&]*/,"&value="+c.join(",")))):t.id&&(a=$("ctrl_"+t.id))&&(o=e.get("data-callback"))&&(a.value=c.join("	"),new Request.Contao({field:a,evalScripts:!1,onRequest:AjaxRequest.displayBox(Contao.lang.loading+" …"),onSuccess:function(e,n){$("ctrl_"+t.id).getParent("div").set("html",n.content),n.javascript&&Browser.exec(n.javascript),AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:o,name:t.id,value:a.value,REQUEST_TOKEN:Contao.request_token})),this.hide()}),a.show({title:t.title,contents:'<iframe src="'+t.url+'" name="simple-modal-iframe" width="100%" height="'+t.height+'" frameborder="0"></iframe>',model:"modal"})},openModalBrowser:function(e,t,n,a){var o="/file",i="file"==n?"&amp;switch=1":"",l=-1!=t.indexOf("{{link_url::");"file"!=n||""!=t&&!l||(o="/page"),l&&(t=t.replace(/^\{\{link_url::([0-9]+)}}$/,"$1"));var s=new SimpleModal({width:768,btn_ok:Contao.lang.close,draggable:!1,overlayOpacity:.5,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}});s.addButton(Contao.lang.close,"btn",function(){this.hide()}),s.addButton(Contao.lang.apply,"btn primary",function(){var t,n,o,i=window.frames["simple-modal-iframe"];if(void 0===i)return void alert("Could not find the SimpleModal frame");for(n=i.document.getElementById("tl_select").getElementsByTagName("input"),o=0;o<n.length;o++)if(n[o].checked&&!n[o].id.match(/^reset_/)){t=n[o].get("value");break}isNaN(t)||(t="{{link_url::"+t+"}}"),a.document.getElementById(e).value=t,this.hide()}),s.show({title:a.document.getElement("div.mce-title").get("text"),contents:'<iframe src="'+document.location.pathname+o+"?table=tl_content&amp;field=singleSRC&amp;value="+t+i+'" name="simple-modal-iframe" width="100%" height="'+(window.getSize().y-180).toInt()+'" frameborder="0"></iframe>',model:"modal"})},getScrollOffset:function(){document.cookie="BE_PAGE_OFFSET="+window.getScroll().y+"; path="+(Contao.path||"/")},autoSubmit:function(e){Backend.getScrollOffset();var t=new Element("input",{type:"hidden",name:"SUBMIT_TYPE",value:"auto"}),n=$(e)||e;t.inject(n,"bottom"),n.submit()},vScrollTo:function(e){window.addEvent("load",function(){window.scrollTo(null,parseInt(e))})},limitPreviewHeight:function(){var e=0;$$("div.limit_height").each(function(t){var n,a,o;if(0===e&&(e=t.className.replace(/[^0-9]*/,"").toInt()),e){if(n=new Element("img",{"class":"limit_toggler",alt:"",title:Contao.lang.expand,width:20,height:24,"data-state":0}),a=t.getCoordinates(),new Tips.Contao(n,{offset:{x:0,y:30}}),t.setStyle("height",e),a.height<=e)return n.src=Backend.themePath+"icons/expand_.svg",void n.inject(t,"after");n.src=Backend.themePath+"icons/expand.svg",n.setStyle("cursor","pointer"),n.addEvent("click",function(){o=n.getPrevious("div").getStyle("height").toInt(),n.getPrevious("div").setStyle("height",o>e?e:""),0==n.get("data-state")?(n.src=Backend.themePath+"icons/collapse.svg",n.set("data-state",1),n.store("tip:title",Contao.lang.collapse)):(n.src=Backend.themePath+"icons/expand.svg",n.set("data-state",0),n.store("tip:title",Contao.lang.expand))}),n.inject(t,"after")}})},toggleCheckboxes:function(e,t){for(var n=$$("input"),a=$(e).checked?"checked":"",o=0;o<n.length;o++)"checkbox"==n[o].type.toLowerCase()&&(void 0===t||t==n[o].id.substr(0,t.length))&&(n[o].checked=a)},toggleCheckboxGroup:function(e,t){var n=$(e).className,a=$(e).checked?"checked":"";if("tl_checkbox"==n){var o=$(t)?$$("#"+t+" .tl_checkbox"):$(e).getParent("fieldset").getElements(".tl_checkbox");o.each(function(e){e.checked=a})}else"tl_tree_checkbox"==n&&$$("#"+t+" .parent .tl_tree_checkbox").each(function(e){e.checked=a});Backend.getScrollOffset()},toggleCheckboxElements:function(e,t){var n=$(e).checked?"checked":"";$$("."+t).each(function(e){e.hasClass("tl_checkbox")&&(e.checked=n)}),Backend.getScrollOffset()},toggleWrap:function(e){var t=$(e),n="off"==t.getProperty("wrap")?"soft":"off";t.setProperty("wrap",n)},toggleUnchanged:function(){$$("#result-list .tl_confirm").each(function(e){e.toggleClass("hidden")})},blink:function(){},addColorPicker:function(){return!0},collapsePalettes:function(){$$("fieldset.hide").each(function(e){e.addClass("collapsed")}),$$("label.error, label.mandatory").each(function(e){var t=e.getParent("fieldset");t&&t.removeClass("collapsed")})},addInteractiveHelp:function(){new Tips.Contao("p.tl_tip",{offset:{x:9,y:23},text:function(e){return e.get("html")}}),new Tips.Contao($("home"),{offset:{x:15,y:42}}),new Tips.Contao($$("#tmenu a[title]").filter(function(e){return""!=e.title}),{offset:{x:2,y:42}}),new Tips.Contao($$("#tmenu button[title]").filter(function(e){return""!=e.title}),{offset:{x:-14,y:42}}),new Tips.Contao($$('a[title][class^="group-"]').filter(function(e){return""!=e.title}),{offset:{x:8,y:38}}),new Tips.Contao($$("a[title].navigation").filter(function(e){return""!=e.title}),{offset:{x:8,y:34}}),$$("img[title]").filter(function(e){return""!=e.title}).each(function(e){new Tips.Contao(e,{offset:{x:0,y:"gimage"==e.get("class")?60:30}})}),["a[title]","input[title]","button[title]","time[title]"].each(function(e){new Tips.Contao($$(e).filter(function(e){return""!=e.title}),{offset:{x:0,y:"time[title]"==e?26:30}})})},makeParentViewSortable:function(e){var t=new Scroller(document.getElement("body"),{onChange:function(e,t){this.element.scrollTo(this.element.getScroll().x,t)}}),n=new Sortables(e,{constrain:!0,opacity:.6,onStart:function(){t.start()},onComplete:function(){t.stop()},onSort:function(e){var t=e.getParent("ul"),n=0;t&&t.getChildren("li").each(function(e){var t=e.getFirst("div");t&&(t.hasClass("wrapper_stop")&&n>0&&n--,t.className=t.className.replace(/(^|\s)indent[^\s]*/g,""),n>0&&t.addClass("indent").addClass("indent_"+n),t.hasClass("wrapper_start")&&n++)})},handle:".drag-handle"});n.active=!1,n.addEvent("start",function(){n.active=!0}),n.addEvent("complete",function(e){if(n.active){var t,a,o,i;e.getPrevious("li")?(t=e.get("id").replace(/li_/,""),a=e.getPrevious("li").get("id").replace(/li_/,""),o=window.location.search.replace(/id=[0-9]*/,"id="+t)+"&act=cut&mode=1&pid="+a,i=window.location.href.replace(/\?.*$/,""),new Request.Contao({url:i+o,followRedirects:!1}).get()):e.getParent("ul")&&(t=e.get("id").replace(/li_/,""),a=e.getParent("ul").get("id").replace(/ul_/,""),o=window.location.search.replace(/id=[0-9]*/,"id="+t)+"&act=cut&mode=2&pid="+a,i=window.location.href.replace(/\?.*$/,""),new Request.Contao({url:i+o,followRedirects:!1}).get())}})},makeMultiSrcSortable:function(e,t,n){var a=new Sortables($(e),{constrain:!0,opacity:.6}).addEvent("complete",function(){var n,a=[],o=$(e).getChildren("li");for(n=0;n<o.length;n++)a.push(o[n].get("data-id"));$(t).value=a.join(",")});$(e).getElements(".gimage").each(function(e){e.hasClass("removable")?new Element("button",{type:"button",html:"&times;","class":"tl_red"}).addEvent("click",function(){var a=e.getParent("li"),o=a.get("data-id");$(n).value=$(n).value.split(",").filter(function(e){return e!=o}).join(","),$(t).value=$(t).value.split(",").filter(function(e){return e!=o}).join(","),a.dispose()}).inject(e,"after"):new Element("button",{type:"button",html:"&times",disabled:!0}).inject(e,"after")}),a.fireEvent("complete")},listWizard:function(e){var t=$(e),n=function(e){new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle"})},a=function(e){var n,o,i,l,s;e.getElements("button").each(function(c){if(!c.hasEvent("click"))switch(n=c.getProperty("data-command")){case"copy":c.addEvent("click",function(){Backend.getScrollOffset(),o=e.clone(!0).inject(e,"before"),(i=e.getFirst("input"))&&(o.getFirst("input").value=i.value),a(o)});break;case"delete":c.addEvent("click",function(){Backend.getScrollOffset(),t.getChildren().length>1&&e.destroy()});break;case null:c.addEvent("keydown",function(n){38==n.event.keyCode?(n.preventDefault(),(l=e.getPrevious("li"))?e.inject(l,"before"):e.inject(t,"bottom"),c.focus()):40==n.event.keyCode&&(n.preventDefault(),(s=e.getNext("li"))?e.inject(s,"after"):e.inject(t.getFirst("li"),"before"),c.focus())})}})};n(t),t.getChildren().each(function(e){a(e)})},tableWizard:function(e){var t=$(e),n=t.getElement("thead"),a=t.getElement("tbody"),o=function(e){var t,n,a,i,l=e.getChildren();for(a=0;a<l.length;a++)for(n=l[a].getChildren(),i=0;i<n.length;i++)(t=n[i].getFirst("textarea"))&&(t.name=t.name.replace(/\[[0-9]+][[0-9]+]/g,"["+a+"]["+i+"]"));new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){o(e)}})},i=function(e){var t,s,c,r,d,u,g,f,h=n.getFirst("tr");e.getElements("button").each(function(n){if(!n.hasEvent("click"))switch(t=n.getProperty("data-command")){case"rcopy":n.addEvent("click",function(){for(Backend.getScrollOffset(),d=new Element("tr"),u=e.getChildren(),f=0;f<u.length;f++)r=u[f].clone(!0).inject(d,"bottom"),(s=u[f].getFirst("textarea"))&&(r.getFirst("textarea").value=s.value);d.inject(e,"after"),i(d),o(a)});break;case"rdelete":n.addEvent("click",function(){Backend.getScrollOffset(),a.getChildren().length>1&&e.destroy(),o(a)});break;case"ccopy":n.addEvent("click",function(){for(Backend.getScrollOffset(),g=l(n),u=a.getChildren(),f=0;f<u.length;f++)c=u[f].getChildren()[g],r=c.clone(!0).inject(c,"after"),(s=c.getFirst("textarea"))&&(r.getFirst("textarea").value=s.value),i(r);r=h.getFirst("td").clone(!0).inject(h.getLast("td"),"before"),i(r),o(a)});break;case"cmovel":n.addEvent("click",function(){if(Backend.getScrollOffset(),g=l(n),u=a.getChildren(),g>0)for(f=0;f<u.length;f++)c=u[f].getChildren()[g],c.inject(c.getPrevious(),"before");else for(f=0;f<u.length;f++)c=u[f].getChildren()[g],c.inject(u[f].getLast(),"before");o(a)});break;case"cmover":n.addEvent("click",function(){if(Backend.getScrollOffset(),g=l(n),u=a.getChildren(),g<e.getChildren().length-2)for(f=0;f<u.length;f++)c=u[f].getChildren()[g],c.inject(c.getNext(),"after");else for(f=0;f<u.length;f++)c=u[f].getChildren()[g],c.inject(u[f].getFirst(),"before");o(a)});break;case"cdelete":n.addEvent("click",function(){if(Backend.getScrollOffset(),g=l(n),u=a.getChildren(),e.getChildren().length>2){for(f=0;f<u.length;f++)u[f].getChildren()[g].destroy();h.getFirst("td").destroy()}o(a)});break;case null:n.addEvent("keydown",function(t){38==t.event.keyCode?(t.preventDefault(),(d=e.getPrevious("tr"))?e.inject(d,"before"):e.inject(a,"bottom"),n.focus(),o(a)):40==t.event.keyCode&&(t.preventDefault(),(d=e.getNext("tr"))?e.inject(d,"after"):e.inject(a,"top"),n.focus(),o(a))})}})},l=function(e){var t,n=$(e).getParent("td"),a=n.getParent("tr"),o=a.getChildren(),i=0;for(t=0;t<o.length&&o[t]!=n;t++)i++;return i};o(a),n.getChildren().each(function(e){i(e)}),a.getChildren().each(function(e){i(e)}),Backend.tableWizardResize()},tableWizardResize:function(e){var t=Cookie.read("BE_CELL_SIZE");if(void 0!==e)t="",$$(".tl_tablewizard textarea").each(function(n){n.setStyle("width",(n.getStyle("width").toInt()*e).round().limit(142,284)),n.setStyle("height",(n.getStyle("height").toInt()*e).round().limit(66,132)),""==t&&(t=n.getStyle("width")+"|"+n.getStyle("height"))}),Cookie.write("BE_CELL_SIZE",t,{path:Contao.path});else if(null!==t){var n=t.split("|");$$(".tl_tablewizard textarea").each(function(e){e.setStyle("width",n[0]),e.setStyle("height",n[1])})}},tableWizardSetWidth:function(){var e=$("tl_tablewizard");e&&e.setStyle("width",Math.round(.96*e.getParent(".tl_formbody_edit").getComputedSize().width))},moduleWizard:function(e){var t=$(e),n=t.getElement("tbody"),a=function(e){var t,n,o,i,l,s=e.getChildren();for(n=0;n<s.length;n++)for(t=s[n].getChildren(),o=0;o<t.length;o++)(i=t[o].getElement("select"))&&(i.name=i.name.replace(/\[[0-9]+]/g,"["+n+"]")),(l=t[o].getElement('input[type="checkbox"]'))&&(l.set("tabindex",-1),l.name=l.name.replace(/\[[0-9]+]/g,"["+n+"]"));new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){a(e)}})},o=function(e){var t,i,l,s,c,r,d;e.getElements("button").each(function(u){if(!u.hasEvent("click"))switch(t=u.getProperty("data-command")){case"copy":u.addEvent("click",function(){for(Backend.getScrollOffset(),s=new Element("tr"),c=e.getChildren(),d=0;d<c.length;d++)l=c[d].clone(!0).inject(s,"bottom"),(i=c[d].getElement("select"))&&(l.getElement("select").value=i.value);s.inject(e,"after"),s.getElement(".chzn-container").destroy(),new Chosen(s.getElement("select.tl_select")),o(s),a(n)});break;case"delete":u.addEvent("click",function(){Backend.getScrollOffset(),n.getChildren().length>1&&e.destroy(),a(n)});break;case"enable":u.addEvent("click",function(){Backend.getScrollOffset(),r=u.getNext('input[type="checkbox"]'),r.checked?(r.checked="",u.getElement("img").src=Backend.themePath+"icons/invisible.svg"):(r.checked="checked",u.getElement("img").src=Backend.themePath+"icons/visible.svg"),a(n)});break;case null:u.addEvent("keydown",function(t){38==t.event.keyCode?(t.preventDefault(),(s=e.getPrevious("tr"))?e.inject(s,"before"):e.inject(n,"bottom"),u.focus(),a(n)):40==t.event.keyCode&&(t.preventDefault(),(s=e.getNext("tr"))?e.inject(s,"after"):e.inject(n,"top"),u.focus(),a(n))})}})};a(n),n.getChildren().each(function(e){o(e)})},optionsWizard:function(e){var t=$(e),n=t.getElement("tbody"),a=function(e){var t,n,o,i,l=e.getChildren();for(n=0;n<l.length;n++)for(t=l[n].getChildren(),o=0;o<t.length;o++)(i=t[o].getFirst("input"))&&(i.name=i.name.replace(/\[[0-9]+]/g,"["+n+"]"),"checkbox"==i.type&&(i.id=i.name.replace(/\[[0-9]+]/g,"").replace(/\[/g,"_").replace(/]/g,"")+"_"+n,i.getNext("label").set("for",i.id)));new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){a(e)}})},o=function(e){var t,i,l,s,c,r;e.getElements("button").each(function(d){if(!d.hasEvent("click"))switch(t=d.getProperty("data-command")){case"copy":d.addEvent("click",function(){for(Backend.getScrollOffset(),s=new Element("tr"),c=e.getChildren(),r=0;r<c.length;r++)l=c[r].clone(!0).inject(s,"bottom"),(i=c[r].getFirst("input"))&&(l.getFirst("input").value=i.value,"checkbox"==i.type&&(l.getFirst("input").checked=i.checked?"checked":""));s.inject(e,"after"),o(s),a(n)});break;case"delete":d.addEvent("click",function(){Backend.getScrollOffset(),n.getChildren().length>1&&e.destroy(),a(n)});break;case null:d.addEvent("keydown",function(t){38==t.event.keyCode?(t.preventDefault(),(s=e.getPrevious("tr"))?e.inject(s,"before"):e.inject(n,"bottom"),d.focus(),a(n)):40==t.event.keyCode&&(t.preventDefault(),(s=e.getNext("tr"))?e.inject(s,"after"):e.inject(n,"top"),d.focus(),a(n))})}})};a(n),n.getChildren().each(function(e){o(e)})},keyValueWizard:function(e){var t=$(e),n=t.getElement("tbody"),a=function(e){var t,n,o,i,l=e.getChildren();for(n=0;n<l.length;n++)for(t=l[n].getChildren(),o=0;o<t.length;o++)(i=t[o].getFirst("input"))&&(i.name=i.name.replace(/\[[0-9]+]/g,"["+n+"]"));new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){a(e)}})},o=function(e){var t,i,l,s,c,r;e.getElements("button").each(function(d){if(!d.hasEvent("click"))switch(t=d.getProperty("data-command")){case"copy":d.addEvent("click",function(){for(Backend.getScrollOffset(),s=new Element("tr"),c=e.getChildren(),r=0;r<c.length;r++)l=c[r].clone(!0).inject(s,"bottom"),(i=c[r].getFirst("input"))&&(l.getFirst().value=i.value);s.inject(e,"after"),o(s),a(n)});break;case"delete":d.addEvent("click",function(){Backend.getScrollOffset(),n.getChildren().length>1&&e.destroy(),a(n)});break;case null:d.addEvent("keydown",function(t){38==t.event.keyCode?(t.preventDefault(),(s=e.getPrevious("tr"))?e.inject(s,"before"):e.inject(n,"bottom"),d.focus(),a(n)):40==t.event.keyCode&&(t.preventDefault(),(s=e.getNext("tr"))?e.inject(s,"after"):e.inject(n,"top"),d.focus(),a(n))})}})};a(n),n.getChildren().each(function(e){o(e)})},
checkboxWizard:function(e){var t=$(e).getElement(".sortable"),n=function(e){new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle"})},a=function(e){var n;e.getElements("button").each(function(a){a.hasEvent("click")||a.addEvent("keydown",function(o){38==o.event.keyCode?(o.preventDefault(),(n=e.getPrevious("span"))?e.inject(n,"before"):e.inject(t,"bottom"),a.focus()):40==o.event.keyCode&&(o.preventDefault(),(n=e.getNext("span"))?e.inject(n,"after"):e.inject(t,"top"),a.focus())})})};n(t),t.getChildren().each(function(e){a(e)})},metaWizard:function(e,t){var n=e.getParent("div").getElement("select");if(""!=n.value){var a=$(t).getLast("li").clone(),o=a.getElement("span"),i=o.getElement("img");a.setProperty("data-language",n.value),o.set("text",n.options[n.selectedIndex].text+" "),i.inject(o,"bottom"),a.getElements("input").each(function(e){e.value="",e.name=e.name.replace(/\[[a-z]{2}(_[A-Z]{2})?]/,"["+n.value+"]");var t=e.getPrevious("label"),a=parseInt(t.get("for").replace(/ctrl_[^_]+_/,""));t.set("for",t.get("for").replace(a,a+1)),e.id=t.get("for")}),a.className="even"==a.className?"odd":"even",a.inject($(t),"bottom"),e.getParent("div").getElement('input[type="button"]').setProperty("disabled",!0),n.options[n.selectedIndex].setProperty("disabled",!0),n.value="",n.fireEvent("liszt:updated")}},metaDelete:function(e){var t=e.getParent("li"),n=e.getParent("div").getElement("select");null===t.getPrevious()&&null===t.getNext()?t.getElements("input").each(function(e){e.value=""}):(n.getElement("option[value="+t.getProperty("data-language")+"]").removeProperty("disabled"),t.destroy(),n.fireEvent("liszt:updated"))},toggleAddLanguageButton:function(e){var t=e.getParent("div").getElement('input[type="button"]');""!=e.value?t.removeProperty("disabled"):t.setProperty("disabled",!0)},sectionWizard:function(e){var t=$(e),n=t.getElement("tbody"),a=function(e){var t,n,o,i=e.getChildren();for(n=0;n<i.length;n++)for(t=i[n].getChildren(),o=0;o<t.length;o++)t[o].getElements("input").each(function(e){e.name=e.name.replace(/\[[0-9]+]/g,"["+n+"]")}),t[o].getElements("select").each(function(e){e.name=e.name.replace(/\[[0-9]+]/g,"["+n+"]")});new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){a(e)}})},o=function(e){var t,i,l,s,c,r,d,u;e.getElements("button").each(function(g){if(!g.hasEvent("click"))switch(t=g.getProperty("data-command")){case"copy":g.addEvent("click",function(){for(Backend.getScrollOffset(),l=new Element("tr"),s=e.getChildren(),d=0;d<s.length;d++)for(i=s[d].clone(!0).inject(l,"bottom"),c=s[d].getElements("select"),r=i.getElements("select"),u=0;u<c.length;u++)r[u].value=c[u].value;l.inject(e,"after"),o(l),a(n)});break;case"delete":g.addEvent("click",function(){Backend.getScrollOffset(),n.getChildren().length>1&&e.destroy(),a(n)});break;case null:g.addEvent("keydown",function(t){38==t.event.keyCode?(t.preventDefault(),(l=e.getPrevious("tr"))?e.inject(l,"before"):e.inject(n,"bottom"),g.focus(),a(n)):40==t.event.keyCode&&(t.preventDefault(),(l=e.getNext("tr"))?e.inject(l,"after"):e.inject(n,"top"),g.focus(),a(n))})}})};a(n),n.getChildren().each(function(e){o(e)})},updateModuleLink:function(e){var t=e.getParent("tr").getLast("td"),n=t.getElement("a.module_link");n.href=n.href.replace(/id=[0-9]+/,"id="+e.value),e.value>0?(t.getElement("a.module_link").setStyle("display",null),t.getElement("img.module_image").setStyle("display","none")):(t.getElement("a.module_link").setStyle("display","none"),t.getElement("img.module_image").setStyle("display",null))},enableImageSizeWidgets:function(){$$(".tl_image_size").each(function(e){var t=e.getElement("select"),n=e.getChildren("input")[0],a=e.getChildren("input")[1],o=function(){if(""===t.get("value")||t.get("value").toInt().toString()===t.get("value")){n.readOnly=!0,a.readOnly=!0;var e=$(t.getSelected()[0]).get("text");e=e.split("(").length>1?e.split("(").getLast().split(")")[0].split("x"):["",""],n.set("value","").set("placeholder",1*e[0]||""),a.set("value","").set("placeholder",1*e[1]||"")}else n.set("placeholder",""),a.set("placeholder",""),n.readOnly=!1,a.readOnly=!1};o(),t.addEvent("change",o),t.addEvent("keyup",o)})},enableToggleSelect:function(){var e,t,n,a,o,i,l=$("tl_select"),s=function(l){for(t=r.indexOf(l),n=r.indexOf(e),o=Math.min(t,n),i=Math.max(t,n),a=r[n].checked?!0:!1,o;i>=o;o++)r[o].checked=a},c=function(t){var n=this.getElement('input[type="checkbox"],input[type="radio"]');if(n){if("radio"==n.type)return void(n.checked||(n.checked="checked"));t.shift&&e?s(n):(n.checked=n.checked?"":"checked","Backend.toggleCheckboxes(this)"==n.get("onclick")&&Backend.toggleCheckboxes(n)),e=n}},r=[];l&&(r=l.getElements('input[type="checkbox"]')),$$(".toggle_select").each(function(e){var t=e.retrieve("boundEvent");t&&e.removeEvent("click",t),t=c.bind(e),e.addEvent("click",t),e.store("boundEvent",t)}),r.each(function(t){t.addEvent("click",function(t){t.shift&&e&&s(this),e=this})})},autoFocusFirstInputField:function(){var e=document.id("main").getElement(".tl_formbody_edit");if(e){var t=e.getElements("input, textarea").filter(function(e){return!e.get("disabled")&&e.isVisible()&&"checkbox"!==e.get("type")&&"radio"!==e.get("type")&&"submit"!==e.get("type")&&"image"!==e.get("type")});t[0]&&t[0].focus()}},editPreviewWizard:function(e){e=$(e);var t,n,a=e.getElement("img"),o={},i=!1,l=e.get("data-original-width"),s=e.get("data-original-height"),c=function(){return a.getComputedSize().width/l},r=function(){var e=c(),n=a.getComputedSize();t.setStyles({top:n.computedTop+(o.y.get("value")*e).round()+"px",left:n.computedLeft+(o.x.get("value")*e).round()+"px",width:(o.width.get("value")*e).round()+"px",height:(o.height.get("value")*e).round()+"px"}),o.width.get("value").toInt()&&o.height.get("value").toInt()?t.setStyle("display",null):t.setStyle("display","none")},d=function(){var e=c(),n=t.getStyles("top","left","width","height"),i=a.getComputedSize(),r={x:Math.max(0,Math.min(l,(n.left.toFloat()-i.computedLeft)/e)).round(),y:Math.max(0,Math.min(s,(n.top.toFloat()-i.computedTop)/e)).round()};r.width=Math.min(l-r.x,n.width.toFloat()/e).round(),r.height=Math.min(s-r.y,n.height.toFloat()/e).round(),r.width&&r.height?t.setStyle("display",null):(r.x=r.y=r.width=r.height="",t.setStyle("display","none")),Object.each(r,function(e,t){o[t].set("value",e)})},u=function(t){t.preventDefault(),i||(i=!0,n={x:t.page.x-e.getPosition().x-a.getComputedSize().computedLeft,y:t.page.y-e.getPosition().y-a.getComputedSize().computedTop},g(t))},g=function(o){if(i){o.preventDefault();var l=a.getComputedSize(),s={x:[Math.max(0,Math.min(l.width,n.x)),Math.max(0,Math.min(l.width,o.page.x-e.getPosition().x-l.computedLeft))],y:[Math.max(0,Math.min(l.height,n.y)),Math.max(0,Math.min(l.height,o.page.y-e.getPosition().y-l.computedTop))]};t.setStyles({top:Math.min(s.y[0],s.y[1])+l.computedTop+"px",left:Math.min(s.x[0],s.x[1])+l.computedLeft+"px",width:Math.abs(s.x[0]-s.x[1])+"px",height:Math.abs(s.y[0]-s.y[1])+"px"}),d()}},f=function(e){g(e),i=!1},h=function(){e.getParent(".tl_tbox").getElements('input[name^="importantPart"]').each(function(e){["x","y","width","height"].each(function(t){e.get("name").substr(13,t.length)===t.capitalize()&&(o[t]=e=$(e))})}),4===Object.getLength(o)&&(Object.each(o,function(e){e.getParent().setStyle("display","none")}),e.addClass("tl_edit_preview_enabled"),t=new Element("div",{"class":"tl_edit_preview_important_part"}).inject(e),r(),a.addEvent("load",r),e.addEvents({mousedown:u,touchstart:u}),$(document.documentElement).addEvents({mousemove:g,touchmove:g,mouseup:f,touchend:f,touchcancel:f,resize:r}))};window.addEvent("domready",h)}};document.addEvent("mousedown",function(e){Backend.getMousePosition(e)}),window.addEvent("domready",function(){$(document.body).addClass("js"),Browser.Features.Touch&&$(document.body).addClass("touch"),Backend.collapsePalettes(),Backend.addInteractiveHelp(),Backend.tableWizardSetWidth(),Backend.enableImageSizeWidgets(),Backend.enableToggleSelect(),Backend.autoFocusFirstInputField(),void 0!=Elements.chosen&&$$("select.tl_chosen").chosen(),$$("textarea.monospace").each(function(e){Backend.toggleWrap(e)})}),window.addEvent("resize",function(){Backend.tableWizardSetWidth()}),window.addEvent("load",function(){Backend.limitPreviewHeight()}),window.addEvent("ajax_change",function(){Backend.addInteractiveHelp(),Backend.enableImageSizeWidgets(),Backend.enableToggleSelect(),void 0!=Elements.chosen&&$$("select.tl_chosen").filter(function(e){return"none"!=e.getStyle("display")}).chosen()});